### **Part 5 of 5: 품질 보증, 자동화 및 향후 과제**

'살아있는 시스템'은 건강한 신진대사, 즉 품질을 지속적으로 검증하고 개선하는 자동화된 프로세스를 통해 유지됩니다. 이 파트는 TDD, CI/CD 파이프라인 등 현대적인 개발 프랙티스를 프로젝트에 적용하고, 시스템의 미래 발전 방향을 제시하며 전체 계획을 마무리합니다.

---

### **5.1. 테스트 주도 개발(TDD) 실천 전략**

- **철학**: TDD는 단순히 버그를 찾는 활동이 아니라, 코드를 작성하기 전에 요구사항을 명확히 하고 테스트 가능한 설계를 유도하는 **설계 기술**입니다. 우리는 **Red-Green-Refactor** 사이클을 엄격히 준수합니다.
    
- **표준 도구**:
    
    - **테스트 프레임워크**: `pytest`
    - **모의 객체(Mocking) 라이브러리**: `unittest.mock`
- **테스트 범위**:
    
    - **단위 테스트 (`tests/domain`, `tests/adapters`)**: 각 클래스와 함수가 독립적으로 정확히 작동하는지 검증합니다. 외부 의존성(DB, API)은 `Mock` 객체로 대체하여 테스트합니다.
    - **통합 테스트**: 실제 데이터베이스나 어댑터 간의 상호작용이 올바르게 이루어지는지 검증합니다. `docker-compose`를 사용하여 테스트 전용 DB 환경을 구성하고 실행할 수 있습니다.
- **TDD 사이클 예시: `KerasRatingPredictor`의 예외 처리 로직**
    
    1. **RED (실패하는 테스트 작성)**: 먼저, 모델이 학습하지 않은 새로운 사용자 ID가 입력되었을 때, `KeyError`나 `IndexError` 대신 예측을 건너뛰거나 기본값(e.g., 0.0)을 반환하는지를 검증하는 테스트를 `tests/adapters/test_keras_rating_predictor.py`에 작성합니다.
    2. **GREEN (테스트를 통과하는 최소 코드 작성)**: 이제 `src/adapters/keras_rating_predictor.py`의 `predict_ratings` 메서드 내부에, ID를 인덱스로 변환하는 과정에서 에러가 발생하면 이를 처리하는 `try-except` 블록이나 `.get(id, default_value)`와 같은 코드를 추가하여 테스트를 통과시킵니다.
    3. **REFACTOR (코드 개선)**: 테스트가 통과하는 것을 확인한 후, 방금 작성한 코드의 가독성을 높이고 중복을 제거하는 등 설계를 개선합니다.

### **5.2. CI/CD 자동화: 품질 게이트 구축 (`.github/workflows/`)**

- **목표**: `main` 브랜치에 코드가 병합되기 전, 모든 코드가 최소한의 품질 기준을 통과하도록 강제하는 자동화된 '품질 게이트'를 구축합니다.
- **도구**: **GitHub Actions**
- **파이프라인 실행 흐름 (`ci.yml`)**:
    1. **트리거**: `main` 브랜치로 `push`되거나 `pull request`가 생성될 때 파이프라인이 자동으로 실행됩니다.
    2. **환경 설정**: Python 특정 버전을 설정하고, `poetry install` 명령어로 프로젝트의 모든 의존성을 설치합니다.
    3. **정적 분석 (Linting)**: `flake8` 또는 `black --check`를 실행하여 코딩 스타일 가이드 준수 여부를 검사합니다. 여기서 실패하면 파이프라인은 즉시 중단됩니다.
    4. **단위 테스트 (Unit Tests)**: `pytest`를 실행하여 모든 단위 테스트를 수행합니다. 모든 테스트를 통과해야 다음 단계로 진행할 수 있습니다.
    5. **빌드 검증 (Build Verification)**: `docker-compose build app` 명령어를 실행하여 애플리케이션의 도커 이미지가 성공적으로 빌드되는지 검증합니다.

이 파이프라인은 `Code_Guide.md`에서 강조하는 '프로세스를 통한 품질 보증'을 실현하는 핵심적인 자동화 장치입니다.

### **5.3. 향후 과제 (Future Roadmap) (수정됨)**

- **V1.1: 추천 로직 고도화**:
    - **피드백 루프**: 사용자가 추천 결과에 대해 '좋아요/싫어요' 피드백을 남기는 기능을 추가하고, 이를 주기적으로 `ratings` 테이블에 저장합니다. `scripts/retrain_model.py` 실행 시 이 데이터를 포함하여 모델 성능을 점진적으로 개선합니다.
    - **상황 인지 추천**: 시간, 요일 정보를 추천 모델의 피처로 활용하여, '주말 오후에 볼만한 예능'과 같은 상황 맞춤형 추천을 제공합니다.
- **V1.2: 사용자 경험(UX) 혁신**:
    - **설명 가능한 AI (XAI)**: 추천 이유를 단순히 '취향 유사'가 아닌, "고객님이 재미있게 보신 영화 <인셉션>의 '#치밀한구성' 라벨과 이 프로그램의 '#두뇌싸움' 라벨이 유사하여 추천합니다."와 같이 구체적인 라벨 비교를 통해 제시합니다.
    - **대화형 인터페이스**: Streamlit 채팅 컴포넌트를 활용하여 "액션 영화 중에 요즘 볼만한 거 없어?"와 같은 자연어 질문에 답변하는 챗봇형 추천 기능을 구현합니다.
- **V2.0: 프로덕션 등급으로 전환**:
    - **서버리스 배포**: Docker 컨테이너를 AWS Fargate나 Google Cloud Run에 배포하여 서버 관리가 필요 없는 운영 환경을 구축합니다.
    - **데이터베이스 고도화**: 대용량 트래픽에 대비하여 MySQL DB의 읽기 전용 복제본(Read Replica)을 구성하여 읽기/쓰기 부하를 분산시키는 것을 검토합니다.
    - **주기적 작업 스케줄링**: `scripts` 폴더의 `fetch_schedule.py`와 `retrain_model.py` 스크립트들을 운영 서버의 `cron` 작업으로 등록하여, 각각 매일, 매주 주기적으로 자동 실행되도록 설정합니다.

### **5.4. 최종 결론**

본 상세 작업 계획서는 **'잘 만들어진 소프트웨어'**를 창조하려는 장인 정신의 철학에서 시작하여, 그 철학을 **클린 아키텍처**라는 견고한 청사진으로 구체화했습니다.

데이터 계층은 **MySQL**을 기반으로 `ERD_Guide.md`의 원칙에 따라 설계되었으며, 핵심 추천 모델은 **TensorFlow/Keras**를 사용하여 구현되었습니다. Airflow의 복잡성을 덜어내고, 핵심적인 주기적 작업들은 독립적인 **`scripts`** 로 분리하여 시스템의 명료성을 높였습니다.

모든 의존성은 **추상 인터페이스**를 통해 제어되며, 최종 애플리케이션은 **Streamlit** 기반의 프레젠테이션 계층에서 단일 책임 원칙에 따라 조립됩니다. **TDD**와 **GitHub Actions 기반의 CI 파이프라인**은 코드의 품질을 보증하는 자동화된 심장 역할을 할 것입니다.

이 청사진을 바탕으로, 우리는 사용자의 숨겨진 취향을 발견하고 정보의 홍수 속에서 가장 빛나는 콘텐츠를 제안하는 지능형 미디어 큐레이터를 성공적으로 만들어낼 것입니다. 이것은 단순한 코드가 아닌, 시간이 지나도 가치를 더하며 성장하는 **'살아있는 시스템'**이 될 것입니다.