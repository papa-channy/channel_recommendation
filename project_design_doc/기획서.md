# **AI TV 추천 시스템: 프로젝트 기획서

## **1\. 프로젝트 정의**

* **목표**: 단순한 장르 매칭을 넘어, 딥러닝과 LLM을 활용해 사용자의 잠재적 취향을 심층적으로 분석하고, 이를 실시간 IPTV 편성표와 동적으로 결합하여 \*\*"지금 당장 시청할 최적의 TV 채널"\*\*을 추천하는 고도로 개인화된 AI 시스템을 구축한다.  
* **주요 기능**:  
  * **🤖 LLM 기반 다차원 콘텐츠 라벨링**: 영화, 드라마 등 모든 콘텐츠에 대해 주제, 분위기, 소재 등 다각적인 시맨틱 라벨을 LLM(Gemini)을 통해 실시간으로 생성한다.  
  * **🧠 딥러닝 통한 잠재 취향 예측**: MovieLens 데이터셋으로 사전 학습된 딥러닝 모델(NCF)을 사용하여, 사용자의 시청 기록을 기반으로 아직 보지 않은 다른 영화에 대한 예상 선호도(평점)를 정밀하게 예측한다.  
  * **👤 동적 페르소나 시뮬레이션**: 정의된 페르소나 프로필을 바탕으로, 실제와 같은 가상 시청 기록을 동적으로 생성하여 다양한 사용자 시나리오를 시뮬레이션한다.  
  * **🔗 시맨틱 유사도 기반 추천**: 사용자의 '잠재 선호 콘텐츠 클러스터'와 '실시간 방송 프로그램'의 라벨을 각각 임베딩하여, 의미적으로 가장 부합하는 콘텐츠를 추천한다.  
  * **📺 인터랙티브 웹 애플리케이션**: Streamlit을 활용하여 사용자가 페르소나와 기준 시점을 선택하면, AI의 분석 과정과 최종 추천 채널 목록을 시각적으로 확인할 수 있는 대시보드를 제공한다.

## **2\. 주요 내용**

* **프로젝트 기간**: 2025-06-24 \~ 2025-07-01  
* **팀장**: 박찬  
* **참여 인원**: 박찬, 김명재, 정의철, 유승환  
* **주요 데이터 소스**: MovieLens Latest Datasets, TMDb API (영화 메타데이터 보강), IPTV 편성표 정보 (웹 크롤링)

## **3\. 일정 계획**

*역할 분담은 상세 계획서에 기반하여 재조정되었습니다.*

| 작업 항목 | 시작 날짜 | 종료 날짜 | 담당자 |
| :---- | :---- | :---- | :---- |
| **기획 및 설계 (Planning & Design)** |  |  |  |
| 프로젝트 목표 구체화 및 아키텍처 설계 | 2025-06-24 | 2025-06-24 | 박찬, 팀 전체 |
| DB 스키마 설계 및 마이그레이션 설정 | 2025-06-25 | 2025-06-25 | 김명재 |
| **핵심 모듈 개발 (Core Development)** |  |  |  |
| IPTV 편성표 크롤러 개발 | 2025-06-25 | 2025-06-26 | 유승환 |
| 데이터 로더 및 전처리 파이프라인 구축 | 2025-06-26 | 2025-06-27 | 김명재 |
| LLM 라벨링 및 페르소나 생성기 개발 | 2025-06-26 | 2025-06-27 | 유승환 |
| 딥러닝 추천 모델 프로토타이핑 및 학습 | 2025-06-27 | 2025-06-28 | 김명재 |
| **시스템 통합 및 구현 (Integration & Impl.)** |  |  |  |
| 추천 엔진(Use Case) 및 백엔드 로직 구현 | 2025-06-28 | 2025-06-29 | 박찬 |
| Streamlit 프론트엔드 UI 구현 및 시각화 | 2025-06-29 | 2025-06-30 | 정의철 |
| 단위/통합 테스트 코드 작성 | 2025-06-29 | 2025-06-30 | 정의철 |
| **마무리 (Finalization)** |  |  |  |
| 전체 시스템 통합 및 최종 디버깅 | 2025-07-01 | 2025-07-01 | 팀 전체 |
| 발표 준비 및 프로젝트 문서화 | 2025-07-01 | 2025-07-01 | 팀 전체 |

## **4\. 작업 분할 구조 (WBS)**

### **1\. 설계 및 환경 구축 (Phase 1\)**

* 1.1. 클린 아키텍처 기반 폴더 구조 설계  
* 1.2. .env를 이용한 보안 환경 구축 및 default\_config.yml 작성  
* 1.3. SQLite 및 Alembic을 이용한 DB 스키마 및 마이그레이션 환경 설정  
* 1.4. GitHub Actions를 이용한 CI 파이프라인 기본 골격 구축

### **2\. 핵심 AI 모듈 개발 (Phase 2\)**

* 2.1. MovieLens 데이터 전처리기(file\_data\_loader) 개발  
* 2.2. PyTorch 기반 평점 예측 모델(torch\_rating\_predictor) 개발 및 학습  
* 2.3. Gemini API 연동 LLM 라벨러(gemini\_content\_labeler) 개발 (캐싱 포함)  
* 2.4. 페르소나 기반 더미 데이터 생성기(default\_persona\_generator) 개발

### **3\. 백엔드 및 프론트엔드 구현 (Phase 3\)**

* 3.1. IPTV 편성표 크롤러(selenium\_schedule\_crawler) 개발  
* 3.2. 핵심 비즈니스 로직(recommend\_channels\_use\_case) 구현  
* 3.3. Streamlit 기반 UI(app.py) 레이아웃 및 인터랙션 구현  
* 3.4. DTO를 활용한 데이터 시각화 컴포넌트 개발

### **4\. 테스트 및 품질 보증 (Phase 4\)**

* 4.1. 각 어댑터에 대한 단위 테스트(Unit Test) 작성  
* 4.2. Use Case에 대한 통합 테스트(Integration Test) 작성  
* 4.3. CI 파이프라인에 테스트 및 린트 자동화 적용  
* 4.4. 최종 시스템 통합 테스트 및 버그 수정

## **5\. 요구사항 정의서**

### **5.1. 기능 요구사항**

* **페르소나 기반 시뮬레이션**: 사용자는 사전에 정의된 페르소나 목록에서 특정 인물을 선택할 수 있어야 한다.  
* **실시간 편성표 연동**: 사용자가 지정한 날짜와 시간의 실시간 IPTV 편성표를 정확히 수집해야 한다.  
* **AI 분석 시각화**: 페르소나의 가상 시청 기록, AI가 예측한 잠재 선호 콘텐츠 목록과 다차원 라벨을 사용자에게 명확히 보여줘야 한다.  
* **채널 추천**: 분석 결과를 바탕으로, 현재 시청 가능한 채널 목록을 유사도 점수 및 추천 이유와 함께 제시해야 한다.  
* **연속 시청 추천 (Next-Up)**: 사용자가 특정 프로그램을 선택했을 때, 해당 프로그램 종료 시간에 맞춰 다음 시청할 만한 프로그램을 이어서 추천해야 한다.

### **5.2. 비기능 요구사항**

* **성능**: '추천 생성' 버튼 클릭 후 15초 이내에 최종 결과가 화면에 표시되어야 한다. (LLM API 호출 및 크롤링 시간 고려)  
* **확장성**: **클린 아키텍처**를 적용하여, LLM 모델이나 추천 알고리즘, 크롤링 대상 사이트가 변경되더라도 시스템의 핵심 로직(Use Case) 수정 없이 어댑터 교체만으로 대응할 수 있어야 한다.  
* **보안**: GEMINI\_API\_KEY 등 모든 민감 정보는 .env 파일을 통해 관리하며, 소스 코드에 절대 노출되지 않아야 한다.  
* **안정성**: 외부 API 호출 실패나 크롤링 실패 시, 시스템 전체가 중단되지 않고 사용자에게 적절한 에러 메시지를 표시하며, 재시도 로직을 통해 안정적으로 동작해야 한다.

## **6\. 프로젝트 설계서**

### **6.1. 시스템 아키텍처**

* **패러다임**: **클린 아키텍처**를 채택하여 계층 간 의존성을 엄격히 관리한다.  
  * **Domain Layer**: RecommendChannelsUseCase가 외부 구현에 독립적인 순수 비즈니스 로직을 담당한다.  
  * **Application/Infrastructure Layer**: 각 기능(데이터 로딩, 모델 추론, LLM 호출, 크롤링)은 추상 인터페이스(Port)와 구체적인 구현체(Adapter)로 분리되어 의존성 주입(DI) 원칙을 따른다.  
* **데이터 흐름**: 페르소나 선택 → 가상 시청기록 생성 → 딥러닝 평점 예측 → Top-K 클러스터 생성 → LLM 라벨링 (사용자 취향) → IPTV 편성표 크롤링 → LLM 라벨링 (방송 프로그램) → 임베딩 및 유사도 계산 → 최종 채널 추천

### **6.2. 기술 스택**

* **주요 언어**: Python  
* **웹 프레임워크 / UI**: Streamlit  
* **데이터 처리**: Pandas, NumPy, PyArrow  
* **딥러닝**: PyTorch  
* **자연어 처리 / 임베딩**: Sentence-Transformers, Google Generative AI (Gemini)  
* **웹 스크래핑**: Selenium, BeautifulSoup4  
* **데이터베이스**: SQLite (프로토타이핑), Alembic (스키마 마이그레이션)  
* **환경 및 설정**: python-dotenv, PyYAML  
* **테스트 및 품질**: pytest, flake8  
* **스케줄링**: Apache Airflow

## **7\. 데이터 연동 정의서**

* **데이터베이스 스키마**: users, movies, genres, movie\_genres, ratings, tv\_programs, labels\_cache 테이블로 구성된 3NF/BCNF 정규화 스키마를 사용한다. 모든 테이블 관계는 외래 키(Foreign Key)로 강제된다.  
* **주요 연동 데이터**:  
  * **MovieLens**: movies.csv, ratings.csv를 로드하여 DB의 movies, ratings 등 관련 테이블에 정제 후 저장.  
  * **IPTV 편성표**: 크롤링 결과를 tv\_programs 테이블에 실시간으로 저장.  
  * **LLM 라벨**: 생성된 라벨은 labels\_cache 테이블에 저장하여 중복 API 호출을 방지.

## **8\. 배포 및 운영 계획**

* **컨테이너화**: Dockerfile을 작성하여 프로젝트 환경을 컨테이너화하고, 어떤 환경에서든 일관된 실행을 보장한다.  
* **CI/CD**: GitHub Actions를 이용하여 main 브랜치에 코드가 병합되기 전, flake8를 통한 코드 린팅과 pytest를 이용한 자동화 테스트를 강제하는 CI 파이프라인을 구축한다.